function toggle(e){obj=document.getElementById(e),obj.style.display="none"==obj.style.display?"block":"none"}function map_point(e){center=result_array[e].geometry.location,map.setCenter(center)}function view_list(){var e="";if(0==result_array.length)return void alert(no_result);for(var a=0;a<result_array.length;a++){0==a&&(e+='<ul id="view_list">'),1==result_array.length&&map_point("0");var r=result_array[a].formatted_address.split(" "),t=result_array[a].formatted_address.substring(result_array[a].formatted_address.lastIndexOf(r[r.length-3]));e+='<li class="result_lists"><a href="javascript:map_point(\''+a+"');\">"+t+"</a></li>"}e+="</ul>",jQuery("#result_list_layer").html(e),window.location.href="#view_list"}function showLocation(e){if(result_from="",e){var a=new Array;a.component="map_components",a.address=e,a.method="search";var r=new Array("error","message","results");exec_xml("editor","procEditorCall",a,function(a,r){complete_search(a,r,e)},r)}}function complete_search(e){var a=e.results;a=a?a.item:new Array,address_adder(a)}function address_adder(e){result_array=new Array,"undefined"==typeof e.length&&(e=new Array(e));for(var a=0;a<e.length;a++)(e[a].formatted_address||null!=e[a].formatted_address)&&(result_array[a]={from:e[a].result_from,formatted_address:e[a].formatted_address,geometry:{location:new nhn.api.map.LatLng(e[a].geometry.lat,e[a].geometry.lng)}});view_list()}function getMaps(){oIcon=new nhn.api.map.Icon("http://static.naver.com/maps2/icons/pin_spot2.png",new nhn.api.map.Size(28,37),new nhn.api.map.Size(14,37));var e={zoom:map_zoom,point:new nhn.api.map.LatLng(defaultlat,defaultlng),enableDblClickZoom:!1};if(map=new nhn.api.map.Map("map_canvas",e),"undefined"!=typeof opener&&null!=opener)var a=opener.editorPrevNode;if("undefined"!=typeof a&&a&&"IMG"==a.nodeName){var r={component:"map_components",method:"decode_data",style:a.getAttribute("style"),data:a.getAttribute("alt")},t=new Array,n=new Array("error","message","width","height","results");exec_xml("editor","procEditorCall",r,function(e){jQuery("#width").val(parseInt(e.width,10)),jQuery("#height").val(parseInt(e.height,10)),t=e.results;var a=t.map_center.split(",");o=new nhn.api.map.LatLng(a[0],a[1]),map.setCenter(o),map_lat=o.getLng(),map_lng=o.getLat();t.map_markers.split(";");map_marker_positions=t.map_markers.trim(),marker=addMarker(0),map_zoom=parseInt(t.map_zoom,10)-5,map_zoom||(map_zoom=10),map.setLevel(map_zoom)},n)}else{o=new nhn.api.map.LatLng(defaultlat,defaultlng),map.setCenter(o);var o=map.getCenter();jQuery("#width").val("600"),jQuery("#height").val("300"),map.setLevel(map_zoom)}var p=new nhn.api.map.ZoomControl;map.addControl(p),p.setPosition({top:10,left:10});var m=new nhn.api.map.MapTypeBtn;map.addControl(m),m.setPosition({top:10,right:10}),map.attach("click",function(e){var a=e.target;if(a instanceof nhn.api.map.Marker){var r=e.target.getPoint();if("undefined"==typeof r)return;removeMarker(r)}else{var r=e.point;map_marker_positions+=r.getLat()+","+r.getLng()+";",addMarker(0)}return!1})}function addMarker(e){if("undefined"!=typeof e){var a;if("undefined"!=typeof map_markers)for(var r=0;r<map_markers.length;r++)map.removeOverlay(map_markers[r]);if(map_markers=new Array,0!=e){var t=e.getLat(),n=e.getLng();map_marker_positions=map_marker_positions.replace(t+","+n+";",""),map_marker_positions+=t+","+n+";"}positions=makeLocationArray(map_marker_positions);for(var r=0;r<positions.length;r++)map_markers[r]=new nhn.api.map.Marker(oIcon,{point:positions[r]}),map.addOverlay(map_markers[r]),a=map_markers[r];return a}}function removeMarker(e){if("undefined"!=typeof e){for(var a=0;a<map_markers.length;a++)map.removeOverlay(map_markers[a]);map_markers=new Array;var r=e.getLat(),t=e.getLng();map_marker_positions=map_marker_positions.replace(r+","+t+";",""),positions=makeLocationArray(map_marker_positions);for(var a=0;a<positions.length;a++)map_markers[a]=new nhn.api.map.Marker(oIcon,{point:positions[a]}),map.addOverlay(map_markers[a])}}function positionstrRemover(e,a){for(var r=a.split(";"),t=0;t<r.length;t++)if(r[t].trim()){var n=r[t].split(","),o=new nhn.api.map.LatLng(n[0],n[1]);o.equals(e)&&(a=a.replace(r[t]+";",""))}return a}function makeLocationArray(e){for(var a=new Array,r=e.split(";"),t=0;t<r.length;t++)if(r[t].trim()){var n=r[t].split(",");a[t]=new nhn.api.map.LatLng(n[0],n[1])}return a}function makeLocationStr(e){for(var a="",r=0;r<e.length;r++)a+=e[r].getLat()+","+e[r].getLng()+";";return a}function insertMap(){if("undefined"!=typeof opener&&opener){var e=jQuery("#width").val(),a=jQuery("#height").val();map_zoom=map.getLevel()+5,map_lat=map.getCenter().getLat(),map_lng=map.getCenter().getLng(),e||(e="600"),a||(a="300");var r={component:"map_components",method:"encode_data",map_center:map_lat+","+map_lng,width:e,height:a,map_markers:map_marker_positions,map_zoom:map_zoom},t="",n=new Array("error","message","results");exec_xml("editor","procEditorCall",r,function(r){var n=r.results;t=n;for(var o='<img src="https://maps-api-ssl.google.com/maps/api/staticmap?center='+map_lat+","+map_lng+"&zoom="+map_zoom+"&size="+e+"x"+a,p=map_marker_positions.split(";"),m=0;m<p.length;m++)p[m].trim()&&(o+="&markers=size:mid|"+p[m]);o+='&sensor=false" editor_component="map_components" alt="'+t+'" style="border:2px dotted #FF0033; no-repeat center;width: '+e+"px; height: "+a+'px;" />',opener.editorFocus(opener.editorPrevSrl);var i=opener.editorGetIFrame(opener.editorPrevSrl);opener.editorReplaceHTML(i,o),opener.editorFocus(opener.editorPrevSrl),window.close()},n)}}var map_zoom=10,map_lat="",map_lng="",map="",marker="",map_markers=new Array,map_marker_positions="",modi_marker_pos="",saved_location=new Array,result_array=new Array,result_from="",oIcon="",tester="";jQuery(document).ready(function(){getMaps()});
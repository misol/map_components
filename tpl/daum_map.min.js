function toggle(e){obj=document.getElementById(e),"none"==obj.style.display?obj.style.display="block":obj.style.display="none"}function map_point(e){center=result_array[e].geometry.location,map.setCenter(center)}function view_list(){var e="";if(0===result_array.length)return void alert(no_result);for(var a=0;a<result_array.length;a++){0===a&&(e+='<ul id="view_list">'),1==result_array.length&&map_point("0");var r=result_array[a].formatted_address.split(" "),t=result_array[a].formatted_address.substring(result_array[a].formatted_address.lastIndexOf(r[r.length-3]));e+='<li class="result_lists"><a href="javascript:map_point(\''+a+"');\">"+t+"</a></li>"}e+="</ul>",jQuery("#result_list_layer").html(e),window.location.href="#view_list"}function showLocation(e){if(result_from="",e){var a=[];a.component="map_components",a.address=e,a.method="search";var r=["error","message","results"];exec_xml("editor","procEditorCall",a,function(a,r){complete_search(a,r,e)},r)}}function complete_search(e,a,r){var t=e.results;t=t?t.item:[],address_adder(t)}function address_adder(e){result_array=[],"undefined"==typeof e.length&&(e=[e]);for(var a=0;a<e.length;a++)(e[a].formatted_address||null!==e[a].formatted_address)&&(result_array[a]={from:e[a].result_from,formatted_address:e[a].formatted_address,geometry:{location:new daum.maps.LatLng(e[a].geometry.lat,e[a].geometry.lng)}});view_list()}function getMaps(){var e,a={level:map_zoom,center:new daum.maps.LatLng(defaultlat,defaultlng)};if(map=new daum.maps.Map(document.getElementById("map_canvas"),a),"undefined"!=typeof opener&&null!==opener&&(e=opener.editorPrevNode),"undefined"!=typeof e&&e&&"IMG"==e.nodeName){var r={component:"map_components",method:"decode_data",style:e.getAttribute("style"),data:e.getAttribute("alt")},t=[],o=["error","message","width","height","results"];exec_xml("editor","procEditorCall",r,function(e,a){jQuery("#width").val(parseInt(e.width,10)),jQuery("#height").val(parseInt(e.height,10)),t=e.results;var r=t.map_center.split(",");s=new daum.maps.LatLng(r[0],r[1]),map.setCenter(s),map_lat=s.getLng(),map_lng=s.getLat();t.map_markers.split(";");map_marker_positions=t.map_markers.trim(),marker=addMarker(0),map_zoom=20-parseInt(t.map_zoom,10),map_zoom||(map_zoom=5),map.setLevel(map_zoom)},o)}else{s=new daum.maps.LatLng(defaultlat,defaultlng),map.setCenter(s);var s=map.getCenter();jQuery("#width").val("600"),jQuery("#height").val("400"),map.setLevel(map_zoom)}var m=new daum.maps.ZoomControl;map.addControl(m,daum.maps.ControlPosition.LEFT);var n=new daum.maps.MapTypeControl;map.addControl(n,daum.maps.ControlPosition.TOPRIGHT),daum.maps.event.addListener(map,"click",function(e){latlng=e.latLng,addMarker(latlng)})}function addMarker(e){var a,r;if("undefined"!=typeof map_markers)for(a=0;a<map_markers.length;a++)map_markers[a].setMap(null);if(0!==e){var t=e.getLat(),o=e.getLng();map_marker_positions=map_marker_positions.replace(t+","+o+";",""),map_marker_positions+=t+","+o+";"}for(positions=makeLocationArray(map_marker_positions),a=0;a<positions.length;a++)map_markers[a]=new daum.maps.Marker({position:positions[a]}),map_markers[a].setMap(map),map_markers[a].setDraggable(!0),map_markers[a].soo_position=positions[a],r=map_markers[a],daum.maps.event.addListener(map_markers[a],"dragstart",function(){var e=this.soo_position;map_marker_positions=map_marker_positions.replace(e.getLat()+","+e.getLng()+";","")}),daum.maps.event.addListener(map_markers[a],"dragend",function(){var e=this.getPosition();map_marker_positions=map_marker_positions.replace(e.getLat()+","+e.getLng()+";",""),map_marker_positions+=e.getLat()+","+e.getLng()+";",addMarker(0)}),daum.maps.event.addListener(map_markers[a],"click",function(){var e=this.soo_position;removeMarker(e)});return r}function removeMarker(e){var a;for(a=0;a<map_markers.length;a++)map_markers[a].setMap(null);var r=e.getLat(),t=e.getLng();for(map_marker_positions=map_marker_positions.replace(r+","+t+";",""),positions=makeLocationArray(map_marker_positions),a=0;a<positions.length;a++)map_markers[a]=new daum.maps.Marker({position:positions[a]}),map_markers[a].setMap(map),map_markers[a].setDraggable(!0),map_markers[a].soo_position=positions[a],new_marker_obj=map_markers[a],daum.maps.event.addListener(map_markers[a],"dragstart",function(){var e=this.soo_position;map_marker_positions=map_marker_positions.replace(e.getLat()+","+e.getLng()+";","")}),daum.maps.event.addListener(map_markers[a],"dragend",function(){var e=this.getPosition();map_marker_positions=map_marker_positions.replace(e.getLat()+","+e.getLng()+";",""),map_marker_positions+=e.getLat()+","+e.getLng()+";",addMarker(0)}),daum.maps.event.addListener(map_markers[a],"click",function(){var e=this.soo_position;removeMarker(e)})}function makeLocationArray(e){for(var a=[],r=e.split(";"),t=0;t<r.length;t++)if(r[t].trim()){var o=r[t].split(",");a[t]=new daum.maps.LatLng(o[0],o[1])}return a}function makeLocationStr(e){for(var a="",r=0;r<e.length;r++)a+=e[r].getLat()+","+e[r].getLng()+";";return a}function insertMap(e){if("undefined"!=typeof opener&&opener){var a=jQuery("#width").val(),r=jQuery("#height").val();map_zoom=20-map.getLevel(),map_lat=map.getCenter().getLat(),map_lng=map.getCenter().getLng(),a||(a="600"),r||(r="400");var t={component:"map_components",method:"encode_data",map_center:map_lat+","+map_lng,width:a,height:r,map_markers:map_marker_positions,map_zoom:map_zoom},o="",s=["error","message","results"];exec_xml("editor","procEditorCall",t,function(e,t){var s=e.results;o=s;for(var m='<img src="https://maps-api-ssl.google.com/maps/api/staticmap?center='+map_lat+","+map_lng+"&zoom="+map_zoom+"&size="+a+"x"+r,n=map_marker_positions.split(";"),p=0;p<n.length;p++)n[p].trim()&&(m+="&markers=size:mid|"+n[p]);m+='&sensor=false" editor_component="map_components" alt="'+o+'" style="border:2px dotted #FF0033; no-repeat center;width: '+a+"px; height: "+r+'px;" />',opener.editorFocus(opener.editorPrevSrl);var i=opener.editorGetIFrame(opener.editorPrevSrl);opener.editorReplaceHTML(i,m),opener.editorFocus(opener.editorPrevSrl),window.close()},s)}}var map_zoom=5,map_lat="",map_lng="",map="",marker="",map_markers=[],map_marker_positions="",modi_marker_pos="",saved_location=[],result_array=[],result_from="";jQuery(document).ready(function(){getMaps()});
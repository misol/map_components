function toggle(a){obj=document.getElementById(a),obj.style.display="none"==obj.style.display?"block":"none"}function map_point(a){center=result_array[a].geometry.location,map.setCenter(center)}function view_list(){var a="";if(0===result_array.length)return void alert(no_result);for(var b=0;b<result_array.length;b++){0===b&&(a+='<ul id="view_list">'),1==result_array.length&&map_point("0");var c=result_array[b].formatted_address.split(" "),d=result_array[b].formatted_address.substring(result_array[b].formatted_address.lastIndexOf(c[c.length-3]));a+='<li class="result_lists"><a href="javascript:map_point(\''+b+"');\">"+d+"</a></li>"}a+="</ul>",jQuery("#result_list_layer").html(a),window.location.href="#view_list"}function showLocation(a){if(result_from="",a){var b=[];b.component="map_components",b.address=a,b.method="search";var c=["error","message","results"];exec_xml("editor","procEditorCall",b,function(b,c){complete_search(b,c,a)},c)}}function complete_search(a){var b=a.results;b=b?b.item:[],address_adder(b)}function address_adder(a){result_array=[],"undefined"==typeof a.length&&(a=[a]);for(var b=0;b<a.length;b++)(a[b].formatted_address||null!==a[b].formatted_address)&&(result_array[b]={from:a[b].result_from,formatted_address:a[b].formatted_address,geometry:{location:new google.maps.LatLng(a[b].geometry.lat,a[b].geometry.lng)}});view_list()}function getMaps(){var a,b={zoom:map_zoom,center:new google.maps.LatLng(defaultlat,defaultlng),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT},panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.LEFT_CENTER},scaleControl:!1,streetViewControl:!1,disableDoubleClickZoom:!0};if(map=new google.maps.Map(document.getElementById("map_canvas"),b),"undefined"!=typeof opener&&null!==opener&&(a=opener.editorPrevNode),"undefined"!=typeof a&&a&&"IMG"==a.nodeName){var c={component:"map_components",method:"decode_data",style:a.getAttribute("style"),data:a.getAttribute("alt")},d=[],e=["error","message","width","height","results"];exec_xml("editor","procEditorCall",c,function(a){jQuery("#width").val(parseInt(a.width,10)),jQuery("#height").val(parseInt(a.height,10)),d=a.results;var b=d.map_center.split(",");f=new google.maps.LatLng(b[0],b[1]),map.setCenter(f),map_lat=f.lng(),map_lng=f.lat();d.map_markers.split(";");map_marker_positions=d.map_markers.trim(),marker=addMarker(0),map_zoom=parseInt(d.map_zoom,10),map_zoom||(map_zoom=13),map.setZoom(map_zoom)},e)}else{f=new google.maps.LatLng(defaultlat,defaultlng),map.setCenter(f);var f=map.getCenter();jQuery("#width").val("600"),jQuery("#height").val("300"),map.setZoom(map_zoom)}google.maps.event.addListener(map,"click",function(a){latlng=a.latLng,addMarker(latlng)})}function addMarker(a){var b,c;if("undefined"!=typeof map_markers)for(b=0;b<map_markers.length;b++)map_markers[b].setMap(null);for(map_markers=[],0!==a&&(map_marker_positions=positionstrRemover(a,map_marker_positions),map_marker_positions+=a.lat()+","+a.lng()+";"),positions=makeLocationArray(map_marker_positions),b=0;b<positions.length;b++)map_markers[b]=new google.maps.Marker({position:positions[b]}),map_markers[b].setMap(map),map_markers[b].setDraggable(!0),map_markers[b].soo_position=positions[b],c=map_markers[b],google.maps.event.addListener(map_markers[b],"dragstart",function(){var a=this.soo_position;map_marker_positions=positionstrRemover(a,map_marker_positions)}),google.maps.event.addListener(map_markers[b],"dragend",function(){var a=this.getPosition();map_marker_positions=positionstrRemover(a,map_marker_positions),map_marker_positions+=a.lat()+","+a.lng()+";",addMarker(0)}),google.maps.event.addListener(map_markers[b],"click",function(){var a=this.soo_position;removeMarker(a)});return c}function removeMarker(a){var b;for(b=0;b<map_markers.length;b++)map_markers[b].setMap(null);for(map_markers=[],map_marker_positions=positionstrRemover(a,map_marker_positions),positions=makeLocationArray(map_marker_positions),b=0;b<positions.length;b++)map_markers[b]=new google.maps.Marker({position:positions[b]}),map_markers[b].setMap(map),map_markers[b].setDraggable(!0),map_markers[b].soo_position=positions[b],new_marker_obj=map_markers[b],google.maps.event.addListener(map_markers[b],"dragstart",function(){var a=this.soo_position;map_marker_positions=positionstrRemover(a,map_marker_positions)}),google.maps.event.addListener(map_markers[b],"dragend",function(){var a=this.getPosition();map_marker_positions=positionstrRemover(a,map_marker_positions),map_marker_positions+=a.lat()+","+a.lng()+";",addMarker(0)}),google.maps.event.addListener(map_markers[b],"click",function(){var a=this.soo_position;removeMarker(a)})}function positionstrRemover(a,b){for(var c=b.split(";"),d=0;d<c.length;d++)if(c[d].trim()){var e=c[d].split(","),f=new google.maps.LatLng(e[0],e[1]);f.equals(a)&&(b=b.replace(c[d]+";",""))}return b}function makeLocationArray(a){for(var b=[],c=a.split(";"),d=0;d<c.length;d++)if(c[d].trim()){var e=c[d].split(",");b[d]=new google.maps.LatLng(e[0],e[1])}return b}function makeLocationStr(a){for(var b="",c=0;c<a.length;c++)b+=a[c].lat()+","+a[c].lng()+";";return b}function insertMap(){if("undefined"!=typeof opener&&opener){var a=jQuery("#width").val(),b=jQuery("#height").val();map_zoom=map.getZoom(),map_lat=map.getCenter().lat(),map_lng=map.getCenter().lng(),a||(a="600"),b||(b="300");var c={component:"map_components",method:"encode_data",map_center:map_lat+","+map_lng,width:a,height:b,map_markers:map_marker_positions,map_zoom:map_zoom},d="",e=["error","message","results"];exec_xml("editor","procEditorCall",c,function(c){var e=c.results;d=e;for(var f='<img src="https://maps-api-ssl.google.com/maps/api/staticmap?center='+map_lat+","+map_lng+"&zoom="+map_zoom+"&size="+a+"x"+b,g=map_marker_positions.split(";"),h=0;h<g.length;h++)g[h].trim()&&(f+="&markers=size:mid|"+g[h]);f+='&sensor=false" editor_component="map_components" alt="'+d+'" style="border:2px dotted #FF0033; no-repeat center;width: '+a+"px; height: "+b+'px;" />',opener.editorFocus(opener.editorPrevSrl);var i=opener.editorGetIFrame(opener.editorPrevSrl);opener.editorReplaceHTML(i,f),opener.editorFocus(opener.editorPrevSrl),window.close()},e)}}var map_zoom=13,map_lat="",map_lng="",map="",marker="",map_markers=[],map_marker_positions="",modi_marker_pos="",saved_location=[],result_array=[],result_from="";jQuery(document).ready(function(){getMaps()});
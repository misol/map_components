function toggle(e){obj=document.getElementById(e),obj.style.display="none"==obj.style.display?"block":"none"}function map_point(e){center=result_array[e].geometry.location,map.setCenter(center)}function view_list(){var e="";if(0==result_array.length)return void alert(no_result);for(var r=0;r<result_array.length;r++){0==r&&(e+='<ul id="view_list">'),1==result_array.length&&map_point("0");var a=result_array[r].formatted_address.split(" "),o=result_array[r].formatted_address.substring(result_array[r].formatted_address.lastIndexOf(a[a.length-3]));e+='<li class="result_lists"><a href="javascript:map_point(\''+r+"');\">"+o+"</a></li>"}e+="</ul>",jQuery("#result_list_layer").html(e),window.location.href="#view_list"}function showLocation(e){if(result_from="",e){var r=new Array;r.component="map_components",r.address=e,r.method="search";var a=new Array("error","message","results");exec_xml("editor","procEditorCall",r,function(r,a){complete_search(r,a,e)},a)}}function complete_search(e){var r=e.results;r=r?r.item:new Array,address_adder(r)}function address_adder(e){result_array=new Array,"undefined"==typeof e.length&&(e=new Array(e));for(var r=0;r<e.length;r++)(e[r].formatted_address||null!=e[r].formatted_address)&&(result_array[r]={from:e[r].result_from,formatted_address:e[r].formatted_address,geometry:{location:new google.maps.LatLng(e[r].geometry.lat,e[r].geometry.lng)}});view_list()}function getMaps(){var e={zoom:map_zoom,center:new google.maps.LatLng(defaultlat,defaultlng),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT},panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.LEFT_CENTER},scaleControl:!1,streetViewControl:!1,disableDoubleClickZoom:!0};if(map=new google.maps.Map(document.getElementById("map_canvas"),e),"undefined"!=typeof opener&&null!=opener)var r=opener.editorPrevNode;if("undefined"!=typeof r&&r&&"IMG"==r.nodeName){var a={component:"map_components",method:"decode_data",style:r.getAttribute("style"),data:r.getAttribute("alt")},o=new Array,t=new Array("error","message","width","height","results");exec_xml("editor","procEditorCall",a,function(e){jQuery("#width").val(parseInt(e.width,10)),jQuery("#height").val(parseInt(e.height,10)),o=e.results;var r=o.map_center.split(",");s=new google.maps.LatLng(r[0],r[1]),map.setCenter(s),map_lat=s.lng(),map_lng=s.lat();o.map_markers.split(";");map_marker_positions=o.map_markers.trim(),marker=addMarker(0),map_zoom=parseInt(o.map_zoom,10),map_zoom||(map_zoom=13),map.setZoom(map_zoom)},t)}else{s=new google.maps.LatLng(defaultlat,defaultlng),map.setCenter(s);var s=map.getCenter();jQuery("#width").val("600"),jQuery("#height").val("400"),map.setZoom(map_zoom)}google.maps.event.addListener(map,"click",function(e){latlng=e.latLng,addMarker(latlng)})}function addMarker(e){var r;if("undefined"!=typeof map_markers)for(var a=0;a<map_markers.length;a++)map_markers[a].setMap(null);map_markers=new Array,0!=e&&(map_marker_positions=positionstrRemover(e,map_marker_positions),map_marker_positions+=e.lat()+","+e.lng()+";"),positions=makeLocationArray(map_marker_positions);for(var a=0;a<positions.length;a++)map_markers[a]=new google.maps.Marker({position:positions[a]}),map_markers[a].setMap(map),map_markers[a].setDraggable(!0),map_markers[a].soo_position=positions[a],r=map_markers[a],google.maps.event.addListener(map_markers[a],"dragstart",function(){var e=this.soo_position;map_marker_positions=positionstrRemover(e,map_marker_positions)}),google.maps.event.addListener(map_markers[a],"dragend",function(){var e=this.getPosition();map_marker_positions=positionstrRemover(e,map_marker_positions),map_marker_positions+=e.lat()+","+e.lng()+";",addMarker(0)}),google.maps.event.addListener(map_markers[a],"click",function(){var e=this.soo_position;removeMarker(e)});return r}function removeMarker(e){for(var r=0;r<map_markers.length;r++)map_markers[r].setMap(null);map_markers=new Array,map_marker_positions=positionstrRemover(e,map_marker_positions),positions=makeLocationArray(map_marker_positions);for(var r=0;r<positions.length;r++)map_markers[r]=new google.maps.Marker({position:positions[r]}),map_markers[r].setMap(map),map_markers[r].setDraggable(!0),map_markers[r].soo_position=positions[r],new_marker_obj=map_markers[r],google.maps.event.addListener(map_markers[r],"dragstart",function(){var e=this.soo_position;map_marker_positions=positionstrRemover(e,map_marker_positions)}),google.maps.event.addListener(map_markers[r],"dragend",function(){var e=this.getPosition();map_marker_positions=positionstrRemover(e,map_marker_positions),map_marker_positions+=e.lat()+","+e.lng()+";",addMarker(0)}),google.maps.event.addListener(map_markers[r],"click",function(){var e=this.soo_position;removeMarker(e)})}function positionstrRemover(e,r){for(var a=r.split(";"),o=0;o<a.length;o++)if(a[o].trim()){var t=a[o].split(","),s=new google.maps.LatLng(t[0],t[1]);s.equals(e)&&(r=r.replace(a[o]+";",""))}return r}function makeLocationArray(e){for(var r=new Array,a=e.split(";"),o=0;o<a.length;o++)if(a[o].trim()){var t=a[o].split(",");r[o]=new google.maps.LatLng(t[0],t[1])}return r}function makeLocationStr(e){for(var r="",a=0;a<e.length;a++)r+=e[a].lat()+","+e[a].lng()+";";return r}function insertMap(){if("undefined"!=typeof opener&&opener){var e=jQuery("#width").val(),r=jQuery("#height").val();map_zoom=map.getZoom(),map_lat=map.getCenter().lat(),map_lng=map.getCenter().lng(),e||(e="600"),r||(r="400");var a={component:"map_components",method:"encode_data",map_center:map_lat+","+map_lng,width:e,height:r,map_markers:map_marker_positions,map_zoom:map_zoom},o="",t=new Array("error","message","results");exec_xml("editor","procEditorCall",a,function(a){var t=a.results;o=t;for(var s='<img src="https://maps-api-ssl.google.com/maps/api/staticmap?center='+map_lat+","+map_lng+"&zoom="+map_zoom+"&size="+e+"x"+r,n=map_marker_positions.split(";"),m=0;m<n.length;m++)n[m].trim()&&(s+="&markers=size:mid|"+n[m]);s+='&sensor=false" editor_component="map_components" alt="'+o+'" style="border:2px dotted #FF0033; no-repeat center;width: '+e+"px; height: "+r+'px;" />',opener.editorFocus(opener.editorPrevSrl);var i=opener.editorGetIFrame(opener.editorPrevSrl);opener.editorReplaceHTML(i,s),opener.editorFocus(opener.editorPrevSrl),window.close()},t)}}var map_zoom=13,map_lat="",map_lng="",map="",marker="",map_markers=new Array,map_marker_positions="",modi_marker_pos="",saved_location=new Array,result_array=new Array,result_from="";jQuery(document).ready(function(){getMaps()});